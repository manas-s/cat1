@model IEnumerable<Corevo.eContracts365.TableEntities.LegalEntity>
@using Corevo.eContracts365.General

@{
    ViewBag.Title = "Company Profile";
    Layout = "~/Views/Shared/_Layout_Settings.cshtml";
}



<table class="width95_a">
    <tr>
        <td class="pageheading font-normal">Company Info <img src="/Content/Images/help_training.png" alt="company info" title="Setup Company and Legal Entity information."></td>
        <td class="pageheading" align="right"><input id="btnAddOrganisation" type="button" value="Add New" class="f_button_green_small" style="display:none;" /></td>
    </tr>
    <tr>
        <td colspan="2">

            <div id="page-wrap">
                <table class="yui-grid width100" id="tableOrganisation">
                    @if (ViewData["Organisation"] != null)
                    {
                        foreach (var item in ViewData["Organisation"] as IEnumerable<Corevo.eContracts365.TableEntities.OrganisationsEntity>)
                        {
                            <tr id="row" style="border-bottom:1px dotted #eeeaea;">
                                <td id="OrgID" style="display:none;">@item.RowKey</td>
                                <td id="OrganisationName" style="display:none;">@item.OrganisationName</td>
                                <td>
                                    @item.OrganisationName
                                    <img src="../Content/Images/context_Menu.png" class="margintop-2px openmenuOrg" alt="Open Menu" title="Open Menu" />
                                </td>
                                <td align="right" style="padding:5px;">
                                    @item.AddressLine1, 
                                    @if (!string.IsNullOrEmpty(item.AddressLine2)) {
                                        @Convert.ToString(item.AddressLine2 + ",");
                                    }
                                    @item.City,
                                    @item.State
                                </td>
                            </tr>
                        }
                    }
                    else
                    {
                        <tr>
                            <td>
                                No items found.
                            </td>
                        </tr>
                    }
                </table>
                </div>
                <br />
</td>
    </tr>
    <tr>
        <td class="pageheading font-normal">Legal Entities</td>
        <td class="pageheading" align="right"><input id="btnAddNew" type="submit" value="Add New" class="f_button_green_small" /></td>
    </tr>
    <tr>
        <td colspan="2" style="padding-top:5px;">
            <div id="page-wrap">
                <div class="inserch1" style=" padding-left: 20px;margin-top: 1px; margin-bottom: 4px;">
                    <input id="txtSearchBox" placeholder="Search" type="text" />
                    <a href="javascript:void(0);"><img src="/Content/Images/search1.png" onclick="search()" /></a>
                </div>
                <div class="selectFIlterItem margin-left-m20">
                    <div id="liFiltersSearchText">

                    </div>
                    <div id="liFiltersStatus">

                    </div>
                    <div id="liFiltersType">

                    </div>
                </div>

                <div class="fields-table">

                    <div class="table-sec">
                        <table cellpadding="0" cellspacing="0" border="0" class="paginated width100">
                            <thead>
                                <tr>
                                  
                                    <th id="footleft" class="font-normal">
                                        Legal Entity
                                        <a class=" search-btn" id="trigger" href="javascript:void(0);">
                                            <span><img src="../Content/Images/down_arrow.png" alt="" title=""></span>
                                        </a>
                                        <div class="search-sec" id="drop" style="display:none;">
                                            <div class=" sort_arrow"><a href="javascript:void(0)" onclick="TableSort('asc');"><img src="../Content/Images/sort_az.png" width="18" height="18"> Sort A to Z</a></div> <div class="sort_arrow"><a href="javascript:void(0)" onclick="    TableSort('desc');"><img src="../Content/Images/sort_za.png" width="18" height="18"> Sort Z to A</a></div>
                                        </div>
                                    </th>
                                    <th class="font-normal">Address</th>
                                    <th class="font-normal">Default Currency</th>
                                    <th class="font-normal">Authorized Signatory(ies)</th>                                    
                                    <th class="font-normal">Created By</th>
                                    <th id="datefootleft" class="font-normal">
                                        Modified On
                                        <a class=" search-btn" id="datetrigger" href="javascript:void(0);">
                                            <span><img src="../Content/Images/down_arrow.png" alt="" title=""></span>
                                        </a>
                                        <div class="search-sec" id="datedrop" style="display:none;">
                                            <div class=" sort_arrow"><a href="javascript:void(0)" onclick="TableSort('ascdate');"><img src="../Content/Images/sort_az.png" width="18" height="18">Oldest - Newest</a></div> <div class="sort_arrow"><a href="javascript:void(0)" onclick="    TableSort('descdate');"><img src="../Content/Images/sort_za.png" width="18" height="18">Newest - Oldest</a></div>
                                        </div>
                                    </th>                                    
                                    <th class="font-normal">Actions</th>
                                </tr>
                            </thead>
                            
                            <tbody id="customertable"></tbody>
                             @*   @if (Model == null || Model.Count() == 0)
    {
        <tr>No items found.</tr>
    }
    else
    {

        foreach (var item in Model)
        {
            <tr style="border-bottom:1px dotted #eeeaea;">
                <td id="EntityID" style="display:none;">@Html.DisplayFor(modelItem => item.RowKey)</td>
                <td id="LegalEntityName" style="display:none;">@Html.DisplayFor(modelItem => item.LegalEntityName)</td>
                <td>
                    @Html.DisplayFor(modelItem => item.LegalEntityName)
                    <img src="../Content/Images/context_Menu.png" class="margintop-2px openmenu" alt="Open Menu" title="Open Menu" />
                </td>
                <td align="right" style="padding:5px;">
                    @Html.DisplayFor(modelItem => item.AddressLine1)

                </td>

                <td align="center">@item.DefaultCurrency</td>
               <td align="center">@item.AuthorizedSignatory</td>
                <td align="center">@item.CreatedBy</td>
                <td align="center">@item.Modified</td>
                <td align="center"><a id="@item.RowKey" href="javascript:void(0)" onclick="EditLegalEntity(this);"><img src="../Content/Images/CM_edit.png" alt="" title="edit"></a> <a id="d_@item.RowKey" name="@item.LegalEntityName" href="javascript:void(0)" onclick="DeleteLegalEntity(this);"><img src="../Content/Images/CM_remove.png" alt="" title="delete"></a></td>
            </tr>
        }

    }
    </tbody>*@
                            
                        </table>
                    </div>

                </div>
                @*<table class="yui-grid width100" id="customertable">
                    @if (Model == null || Model.Count() == 0)
                        {
                    <tr>No items found.</tr>
                        }
                        else
                        {
                    foreach (var item in Model)
                    {
                        <tr id="row" style="border-bottom:1px dotted #eeeaea;">
                            <td id="EntityID" style="display:none;">@Html.DisplayFor(modelItem => item.RowKey)</td>
                            <td id="LegalEntityName" style="display:none;">@Html.DisplayFor(modelItem => item.LegalEntityName)</td>
                            <td>
                                @Html.DisplayFor(modelItem => item.LegalEntityName) 
                                <img src="../Content/Images/context_Menu.png" class="margintop-2px openmenu" alt="Open Menu" title="Open Menu" />
                            </td>
                            <td align="right" style="padding:5px;">
                                @Html.DisplayFor(modelItem => item.AddressLine1), 
                                @if (!string.IsNullOrEmpty(item.AddressLine2))
                                {
                                    Convert.ToString(item.AddressLine2 + ",");
                                }
                                @Html.DisplayFor(modelItem => item.City),
                                @Html.DisplayFor(modelItem => item.State)
                            </td>
                        </tr>
                    }
                }
                </table>*@
                </div>
            <div class="pagination-holder clearfix margin-left-m20">
                <article id="compact-pagination"></article>
            </div>
</td>
    </tr>
</table>


<!-- Right Click Menu -->
<ul id="myMenuOrg" class="contextMenu">
    <li class="edit"><a href="#edit">Edit</a></li>
    @*<li class="delete"><a href="#delete">Delete</a></li>*@
</ul>

<div id="addEditOrganisation" style="display:none;">
    <div id="dvPopupHeadingOrganisation" class="modalheader"><span></span></div>
    <div class="modalbody">
        <div id="addNewEntityFields">
            <table cellpadding="2" cellspacing="2" class="width100">
                <tr>
                    <td class="f_head"></td>
                    <td class="labelleft"><input id="txtOrganisationID" name="OrganisationID" type="hidden" />
                        <input id="txtOrganisatioNameOld" name="OrganisatioNameOld" type="hidden" /></td>
                </tr>
                <tr>
                    <td class="f_head">Company Name<small class="required">*</small></td>
                    <td class="labelleft"><input id="txtOrganisationName" name="OrganisationName" maxlength="100" type="text" class="f_inpt width70 validelement" /></td>
                </tr>
                <tr>
                    <td class="f_head">Address Line 1<small class="required">*</small></td>
                    <td class="labelleft"><textarea class="f_inpt_textarea width70 validelement" rows="3" id="txtAddress1Org" name="Address1Org" maxlength="100"></textarea>@*<input id="txtAddress1Org" name="Address1Org" maxlength="100" type="text" class="f_inpt width70 validelement" />*@</td>
                </tr>
                <tr>
                    <td class="f_head">Address Line 2</td>
                    <td class="labelleft"><textarea class="f_inpt_textarea width70" rows="3" id="txtAddress2Org" name="Address2Org" maxlength="100"></textarea> @*<input id="txtAddress2Org" name="Address2Org" maxlength="100" type="text" class="f_inpt width70 " />*@</td>
                </tr>
                <tr>
                    <td class="f_head">City<small class="required">*</small></td>
                    <td class="labelleft"><input id="txtCityOrg" maxlength="50" name="CityOrg" type="text" class="f_inpt width70 validelement" /></td>
                </tr>
                <tr>
                    <td class="f_head">State/Province/Region<small class="required">*</small></td>
                    <td class="labelleft"><input id="txtStateOrg" maxlength="50" name="StateOrg" type="text" class="f_inpt width70 validelement" /></td>
                </tr>
                <tr>
                    <td class="f_head">Zip/Postal Code</td>
                    <td class="labelleft"><input id="txtZipOrg" maxlength="20" name="ZipCodeOrg" type="text" class="f_inpt width70" /></td>
                </tr>
                <tr>
                    <td class="f_head">Country<small class="required">*</small></td>
                    <td class="labelleft">
                        <select id="ddlCountryOrg" name="CountryOrg" class="f_inpt width70 validelement"></select>
                    </td>
                </tr>
                <tr style="display:none">
                    <td class="f_head">Key People</td>
                    <td class="labelleft">
                        <input id="txtKeyPeople" name="KeyPeople" type="text" class="f_inpt width70" />
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>


            <!-- Right Click Menu -->
            <ul id="myMenu" class="contextMenu">
                <li class="edit"><a href="#edit">Edit</a></li>
                <li class="delete"><a href="#delete">Delete</a></li>
            </ul>

            <div id="addNewEntity" style="display:none;">
                <div id="dvPopupHeading" class="modalheader"><span></span></div>
                <div class="modalbody">
                    <div id="addNewEntityFields">
                        <table cellpadding="2" cellspacing="2" class="width100">
                            <tr>
                                <td class="f_head"></td>
                                <td class="labelleft"><input id="txtEntityIDLE" name="EntityID" type="hidden" /></td>
                            </tr>
                            <tr>
                                <td class="f_head">Legal Entity Name<small class="required">*</small></td>
                                <td class="labelleft"><input id="txtComapnyNameLE" name="ComapnyName" type="text" maxlength="100" onchange="ReplaceSpecialCharacters(this);" class="f_inpt width98 validelement validtitle" /></td>
                            </tr>
                            <tr>
                                <td class="f_head">Abbreviation</td>
                                <td class="labelleft"><input id="txtComapnyNameLEAbbreviation" maxlength="10" name="ComapnyNameAbbr" type="text" class="f_inpt width98" /></td>
                            </tr>
                            <tr>
                                <td class="f_head">Address Line 1</td>
                                <td class="labelleft"><textarea class="f_inpt_textarea width98" rows="3" id="txtAddress1LE" name="Address1" maxlength="100"></textarea>@*<input id="txtAddress1LE" name="Address1" maxlength="100" type="text" class="f_inpt width98" />*@</td>
                            </tr>
                            <tr>
                                <td class="f_head">Address Line 2</td>
                                <td class="labelleft"><textarea class="f_inpt_textarea width98" rows="3" id="txtAddress2LE" name="Address2" maxlength="100"></textarea>@*<input id="txtAddress2LE" name="Address2" maxlength="100" type="text" class="f_inpt width98 " />*@</td>
                            </tr>
                            <tr>
                                <td class="f_head">City</td>
                                <td class="labelleft"><input id="txtCityLE" name="City" maxlength="50" type="text" class="f_inpt width98" /></td>
                            </tr>
                            <tr>
                                <td class="f_head">State/Province/Region</td>
                                <td class="labelleft"><input id="txtStateLE" name="State" maxlength="50" type="text" class="f_inpt width98" /></td>

                            </tr>
                            <tr>
                                <td class="f_head">Zip/Postal Code</td>
                                <td class="labelleft"><input id="txtZipLE" name="ZipCode" maxlength="20" type="text" class="f_inpt width98" /></td>
                            </tr>
                            <tr>
                                <td class="f_head">Country</td>
                                <td class="labelleft">
                                    <select id="ddlCountryLE" name="Country" class="f_inpt width98"></select>
                                </td>
                            </tr>
                            <tr>
                                <td class="f_head">Default Currency<small class="required">*</small></td>
                                <td class="labelleft">
                                    <select id="ddlCurrencyLE" name="Currency" class="f_inpt width98 validelement"></select>
                                </td>
                            </tr>
                            <tr id="trAuthorizedSignatoryLegalInfo">
                                <td class="f_head">Authorized Signatory(ies)</td>
                                <td class="labelleft">
                                    <select id="ddlAuthorizedSignatory" multiple="multiple" class="f_inpt width98 chosenmulti" data-placeholder="Select"></select><br />

                                    <span style="font-size:12px;">Note: eSignature on Contracts related to this Legal entity can be obtained only from Authorized Signatory users selected here.
                                        </span>
                               </td>
                            </tr>
                            <tr>
                                <td class="f_head">Company Number/Registration Number</td>
                                <td class="labelleft"><input id="txtCompanyN" name="CompanyNumber" maxlength="50" type="text" class="f_inpt width98" /></td>
                            </tr>
                            <tr>
                                <td class="f_head">Company Fax</td>
                                <td class="labelleft"><input id="txtCompanyFax" name="CompanyFax" maxlength="50" type="text" class="f_inpt width98" /></td>
                            </tr>
                            <tr style="display:none">
                                <td class="f_head">Default Governing Law</td>
                                <td class="labelleft">
                                    <input id="txtGoverningLawLE" name="GoverningLaw" type="text" class="f_inpt width98" />
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
<style>
    /*.search-field input {
            width: auto !important;
        }*/
        .search-field input[type=text] ::-ms-clear{
            /*min-width:200px !important;*/
            display: none !important;
             width : 0 !important; height: 0 !important;
        }
        .search-field input[type=text] ::-ms-reveal
         {  display: none !important; width : 0 !important; height: 0 !important; }

    .search-choice span {
        width: auto !important;
        line-height: 14px !important;
    }

    #ddlAuthorizedSignatory_chosen {
        width: 98% !important;
    }
</style>



            @section Scripts {
                @*<script src="~/Scripts/jquery.simplemodal-1.1.1.js" type="text/javascript"></script>*@
              @Scripts.Render("~/Scripts/Contract365/Settings_CompanyProfile.js?" + DateTime.Now.GetHashCode())  
<script type="text/javascript">
    @*BindCountry(@Html.Raw(Json.Encode(ViewBag.Country)));
    BindCurrency(@Html.Raw(Json.Encode(ViewBag.Currency)));*@
                </script>
            }
